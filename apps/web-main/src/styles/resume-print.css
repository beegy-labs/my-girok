/* Resume Print Styles - Multi-page Layout (A4 and Letter) */

/* Paged.js Container Styles */
.pagedjs-container {
  width: 100%;
  margin: 0 auto;
}

/* Paged.js Page Styles - Each page is a separate div */
.pagedjs_page {
  margin: 0 auto 2rem auto !important; /* Add gap between pages */
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15) !important;
  background: white !important;
}

/* Page area - the actual content area */
.pagedjs_page_content {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding: 0.5cm !important; /* Minimal padding for maximum content space */
}

/* Paged.js area - where content is placed */
.pagedjs_pagebox {
  box-sizing: border-box;
}

/* Paged.js margin boxes */
.pagedjs_margin {
  box-sizing: border-box;
}

/* Ensure content within paged.js pages has proper spacing */
.pagedjs_page_content > * > * {
  padding: 0 !important;
  margin: 0;
}

.pagedjs_page_content .border-b-2 {
  margin-bottom: 1.5rem;
}

.pagedjs_page_content .mb-6 {
  margin-bottom: 1.5rem;
}

.pagedjs_page_content .resume-section,
.pagedjs_page_content .resume-item {
  margin-bottom: 1.25rem;
}

/* Base page styles - Use block to avoid flex interfering with page breaks */
.resume-page-container {
  display: block;
  margin: 0 auto;
}

/* Remove scaling and optimization hints in print mode */
@media print {
  #resume-content {
    transform: none !important;
    margin-bottom: 0 !important;
    will-change: auto !important;
    transition: none !important;
  }

  .resume-page-container {
    display: block;
  }
}

/* A4 size: 210mm × 297mm */
.resume-page-a4 {
  width: 21cm;
  min-height: 29.7cm;
  padding: 0.5cm; /* Minimal padding for maximum content space */
  margin: 0 auto;
  background: white;
  position: relative;
  box-sizing: border-box;
  overflow: visible; /* Allow natural content flow for print */
}

/* Letter size: 215.9mm × 279.4mm */
.resume-page-letter {
  width: 21.59cm;
  min-height: 27.94cm;
  padding: 0.5cm; /* Minimal padding for maximum content space */
  margin: 0 auto;
  background: white;
  position: relative;
  box-sizing: border-box;
  overflow: visible; /* Allow natural content flow for print */
}

@media screen {
  .resume-page-container {
    background-color: #f3f4f6; /* gray-100 */
    padding: 2rem 0;
  }

  .resume-page-a4,
  .resume-page-letter {
    margin: 0 auto 2rem auto; /* Add bottom margin to simulate page gap */
    background-color: white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  }

  /* Visual page break indicators for A4 */
  .resume-page-a4 {
    background-image: repeating-linear-gradient(
      to bottom,
      transparent,
      transparent calc(29.7cm - 2px),
      #ef4444 calc(29.7cm - 2px), /* red-500 for clear visibility */
      #ef4444 calc(29.7cm - 1px),
      #f3f4f6 calc(29.7cm - 1px), /* gray-100 for page gap */
      #f3f4f6 calc(29.7cm + 2rem - 1px), /* 2rem gap between pages */
      transparent calc(29.7cm + 2rem)
    );
    background-size: 100% calc(29.7cm + 2rem);
  }

  /* Visual page break indicators for Letter */
  .resume-page-letter {
    background-image: repeating-linear-gradient(
      to bottom,
      transparent,
      transparent calc(27.94cm - 2px),
      #ef4444 calc(27.94cm - 2px), /* red-500 for clear visibility */
      #ef4444 calc(27.94cm - 1px),
      #f3f4f6 calc(27.94cm - 1px), /* gray-100 for page gap */
      #f3f4f6 calc(27.94cm + 2rem - 1px), /* 2rem gap between pages */
      transparent calc(27.94cm + 2rem)
    );
    background-size: 100% calc(27.94cm + 2rem);
  }
}

@media print {
  /* Set page size with minimal margins */
  @page {
    size: A4 portrait;
    margin: 0; /* Remove all page margins */
  }

  /* Hide paginated view in print - use continuous view instead */
  .pagedjs-container {
    display: none !important;
  }

  /* Show and optimize continuous view for print */
  #resume-content {
    display: block !important;
    transform: none !important;
    margin: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Main resume container */
  #resume-content > div {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0.5cm !important; /* Minimal padding for printer safe area */
    box-sizing: border-box !important;
    overflow: visible !important; /* Critical: allow content to flow naturally */
    box-shadow: none !important;
    background: white !important;
  }

  /* Reset all backgrounds and shadows */
  * {
    background: white !important;
    box-shadow: none !important;
  }

  /* Prevent text overflow with proper word breaking */
  * {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
  }

  /* Ensure sections don't break awkwardly */
  .resume-section {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  .resume-item {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Keep headings with content */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
  }

  /* Prevent orphans and widows */
  p, li {
    orphans: 3;
    widows: 3;
  }
}

/* Page number indicator (screen only) */
.resume-page-number {
  position: absolute;
  bottom: 0.5cm;
  right: 1.5cm;
  font-size: 10px;
  color: #9CA3AF; /* gray-400 */
  font-weight: 600;
}

@media print {
  .resume-page-number {
    display: none;
  }
}

/* Print optimizations */
@media print {
  /* Ensure sections don't break awkwardly */
  .resume-section {
    page-break-inside: avoid;
    break-inside: avoid;
    margin-bottom: 1.5rem;
  }

  .resume-item {
    page-break-inside: avoid;
    break-inside: avoid;
    margin-bottom: 1rem;
  }

  /* Prevent orphans and widows */
  p {
    orphans: 3;
    widows: 3;
  }

  /* Keep headings with their content */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Ensure profile image doesn't break */
  img {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Override flex layouts that interfere with page breaks */
  /* Keep essential flex for header and small components, but override for large containers */
  .resume-section .flex,
  .resume-item .flex {
    display: block !important;
  }

  /* Specific overrides for resume header - keep flex for better layout */
  .border-b-2.border-gray-800 .flex {
    display: flex !important;
  }

  /* Ensure list items stay together when possible */
  li {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Better handling of tables and structured content */
  table, tr, td, th {
    page-break-inside: avoid;
    break-inside: avoid;
  }
}
