/* Resume Print Styles - Multi-page Layout (A4 and Letter) */
/* Updated for Dual-Layer Architecture */

/*
 * =============================================================================
 * CAPTURE LAYER STYLES
 * The capture layer is hidden off-screen but always renders at original size.
 * This ensures identical PDF output across all devices.
 * =============================================================================
 */
.resume-capture-layer {
  /* Position off-screen but keep renderable */
  position: absolute;
  left: -9999px;
  top: 0;
  /* No transforms - always original size */
  transform: none !important;
  /* Ensure clean rendering */
  background-color: #ffffff;
  overflow: visible;
  /* Prevent any animations */
  transition: none !important;
  will-change: auto !important;
}

/* Ensure capture layer content has no transforms */
.resume-capture-layer * {
  transform: none !important;
  transition: none !important;
}

/*
 * =============================================================================
 * PAGED.JS CONTAINER STYLES (Screen)
 * =============================================================================
 */
.pagedjs-container {
  width: 100%;
  margin: 0 auto;
}

/* Screen-only: Hide in continuous mode but keep rendered for print */
@media screen {
  .screen-hidden {
    display: none !important;
  }
}

/* Paged.js Page Styles - Each page is a separate div */
.pagedjs_page {
  margin: 0 auto 2rem auto !important;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15) !important;
  background: white !important;
}

/* Page area - the actual content area */
.pagedjs_page_content {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding: 0.3cm !important;
}

.pagedjs_pagebox {
  box-sizing: border-box;
}

.pagedjs_margin {
  box-sizing: border-box;
}

/* Content spacing within paged.js pages */
.pagedjs_page_content > * > * {
  padding: 0 !important;
  margin: 0;
}

.pagedjs_page_content .border-b-2 {
  margin-bottom: 1rem;
}

.pagedjs_page_content .mb-6 {
  margin-bottom: 1rem;
}

.pagedjs_page_content .resume-section,
.pagedjs_page_content .resume-item {
  margin-bottom: 0.75rem;
}

/*
 * =============================================================================
 * RESUME CONTENT WRAPPER STYLES
 * =============================================================================
 */
.resume-content-wrapper {
  box-sizing: border-box;
  background-color: #ffffff;
}

.resume-page-container {
  display: block;
  margin: 0 auto;
}

/*
 * =============================================================================
 * PAPER SIZE CLASSES (A4 and Letter)
 * =============================================================================
 */
.resume-page-a4 {
  width: 21cm;
  min-height: 29.7cm;
  padding: 0.3cm;
  margin: 0 auto;
  background: white;
  position: relative;
  box-sizing: border-box;
  overflow: visible;
}

.resume-page-letter {
  width: 21.59cm;
  min-height: 27.94cm;
  padding: 0.3cm;
  margin: 0 auto;
  background: white;
  position: relative;
  box-sizing: border-box;
  overflow: visible;
}

/*
 * =============================================================================
 * SCREEN-SPECIFIC STYLES
 * =============================================================================
 */
@media screen {
  .resume-page-container {
    background-color: #f3f4f6;
    padding: 2rem 0;
  }

  .resume-page-a4,
  .resume-page-letter {
    margin: 0 auto 2rem auto;
    background-color: white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  }

  /* Visual page break indicators for A4 */
  .resume-page-a4 {
    background-image: repeating-linear-gradient(
      to bottom,
      transparent,
      transparent calc(29.7cm - 2px),
      #ef4444 calc(29.7cm - 2px),
      #ef4444 calc(29.7cm - 1px),
      #f3f4f6 calc(29.7cm - 1px),
      #f3f4f6 calc(29.7cm + 2rem - 1px),
      transparent calc(29.7cm + 2rem)
    );
    background-size: 100% calc(29.7cm + 2rem);
  }

  /* Visual page break indicators for Letter */
  .resume-page-letter {
    background-image: repeating-linear-gradient(
      to bottom,
      transparent,
      transparent calc(27.94cm - 2px),
      #ef4444 calc(27.94cm - 2px),
      #ef4444 calc(27.94cm - 1px),
      #f3f4f6 calc(27.94cm - 1px),
      #f3f4f6 calc(27.94cm + 2rem - 1px),
      transparent calc(27.94cm + 2rem)
    );
    background-size: 100% calc(27.94cm + 2rem);
  }
}

/*
 * =============================================================================
 * PRINT STYLES
 * =============================================================================
 */
@media print {
  /*
   * Print Configuration Notes:
   * - Set browser margins to "None"
   * - Disable headers and footers
   * - Enable background graphics
   */
  @page {
    margin: 0;
  }

  @page :root {
    size: A4 portrait;
  }

  /* Hide non-print elements */
  header, nav, footer, .toolbar,
  .print\:hidden,
  [class*="print:hidden"] {
    display: none !important;
  }

  /* Hide capture layer in print (it's only for PDF export) */
  .resume-capture-layer {
    display: none !important;
  }

  /* Hide continuous view - use Paged.js */
  #resume-content {
    display: none !important;
    transform: none !important;
    margin-bottom: 0 !important;
    will-change: auto !important;
    transition: none !important;
  }

  /* Remove all transforms for print */
  .pagedjs-container,
  .pagedjs-container *,
  [style*="transform"],
  [style*="scale"] {
    transform: none !important;
    margin-bottom: 0 !important;
    will-change: auto !important;
    transition: none !important;
  }

  /* Paged.js container for print */
  .pagedjs-container {
    display: block !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    position: static !important;
  }

  .pagedjs_pages {
    display: block !important;
    width: 100% !important;
  }

  .pagedjs_page {
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
    page-break-inside: avoid !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    position: relative !important;
    overflow: visible !important;
    background: white !important;
  }

  .pagedjs_page_content {
    overflow: visible !important;
    background: white !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    position: relative !important;
  }

  .pagedjs_pagebox {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  .pagedjs_area {
    width: 100% !important;
    max-width: 100% !important;
  }

  .pagedjs_page_content * {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Hide container backgrounds */
  .bg-gray-100,
  [class*="bg-gray-100"] {
    background: transparent !important;
    padding: 0 !important;
    box-shadow: none !important;
  }

  .print-content {
    display: block !important;
    transform: none !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    position: static !important;
  }

  .print-content[style] {
    transform: none !important;
    margin-bottom: 0 !important;
  }

  /* Reset backgrounds and shadows */
  * {
    box-shadow: none !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Text rendering */
  * {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
  }

  a, span, p, div, li {
    word-break: break-word !important;
    overflow-wrap: anywhere !important;
    hyphens: auto !important;
  }

  img, video, svg {
    max-width: 100% !important;
    height: auto !important;
  }

  /* Page break rules */
  .resume-section {
    max-width: 100% !important;
    page-break-inside: auto !important;
    break-inside: auto !important;
    margin-bottom: 0.75rem;
  }

  .resume-item {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    max-width: 100% !important;
    margin-bottom: 0.5rem;
  }

  .resume-item > h3,
  .resume-item > p:only-child {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid !important;
    break-after: avoid !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  p, li {
    orphans: 2;
    widows: 2;
  }

  .border-b-2 {
    page-break-inside: auto !important;
    break-inside: auto !important;
    page-break-after: auto !important;
  }

  .resume-page-number {
    display: none !important;
  }

  /* Root optimizations */
  body, html {
    margin: 0;
    padding: 0;
  }

  p {
    orphans: 3;
    widows: 3;
  }

  img {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  .border-b-2.border-gray-800 {
    page-break-inside: auto;
    break-inside: auto;
    page-break-after: auto;
  }

  /* Flex layout handling */
  .resume-section .flex,
  .resume-item .flex {
    display: block !important;
  }

  .border-b-2.border-gray-800 .flex {
    display: flex !important;
  }

  li {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  table, tr, td, th {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  ul, ol {
    orphans: 2;
    widows: 2;
  }

  /* Spacing classes */
  .space-y-2 > * + * {
    margin-top: 0.5rem !important;
  }

  .space-y-4 > * + * {
    margin-top: 1rem !important;
  }

  .mb-6 {
    margin-bottom: 1rem !important;
  }

  .mb-5 {
    margin-bottom: 0.75rem !important;
  }
}

/* Page number indicator (screen only) */
.resume-page-number {
  position: absolute;
  bottom: 0.5cm;
  right: 1.5cm;
  font-size: 10px;
  color: #9CA3AF;
  font-weight: 600;
}
