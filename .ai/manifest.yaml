# AI Documentation Manifest
# Machine-readable contract for LLM agents
# Project: my-girok

version: "1.2"
last_updated: "2026-01-11"

# 4-Tier Architecture Definition
architecture:
  tier1_indicate:
    description: "LLM entry points - task-based navigation"
    files:
      - path: "CLAUDE.md"
        llm: "claude"
        last_updated: "2026-01-09"
        features: ["task-based-navigation", "essential-reading"]
      - path: "GEMINI.md"
        llm: "gemini"
        last_updated: "2026-01-06"
        features: ["task-based-navigation", "essential-reading"]

  tier2_abstract:
    description: "LLM-optimized context (token-efficient, 50 lines max)"
    base_path: ".ai/"
    token_budget: "~2K tokens"

    core:
      - path: "README.md"
        purpose: "Navigation hub for all AI documentation"
        required: true
        priority: 0
        last_updated: "2026-01-11"
      - path: "rules.md"
        purpose: "Core DO/DON'T rules (CRITICAL)"
        required: true
        priority: 1
        last_updated: "2026-01-11"
        is_ssot_for: "docs/llm/rules.md"
      - path: "best-practices.md"
        purpose: "2026 Best Practices checklist"
        required: true
        priority: 2
        last_updated: "2026-01-04"
      - path: "architecture.md"
        purpose: "System patterns and routing"
        required: true
        priority: 3
        last_updated: "2026-01-06"
      - path: "ssot.md"
        purpose: "Single Source of Truth strategy"
        required: false
        priority: 4
        last_updated: "2026-01-11"

    infrastructure:
      - path: "database.md"
        purpose: "goose + Prisma migrations"
        last_updated: "2026-01-04"
        details: "docs/llm/policies/database.md"
      - path: "caching.md"
        purpose: "Valkey/Redis patterns"
        last_updated: "2026-01-04"
        details: "docs/llm/policies/caching.md"
      - path: "ci-cd.md"
        purpose: "GitHub Actions + ArgoCD"
        last_updated: "2026-01-04"
        details: "docs/llm/ci-cd.md"
      - path: "helm-deployment.md"
        purpose: "Kubernetes/Helm deployment"
        last_updated: "2026-01-11"
        details: "docs/llm/helm-deployment.md"
      - path: "docker-deployment.md"
        purpose: "Docker Compose quick ref"
        last_updated: "2025-11-06"
        details: "docs/llm/docker-deployment.md"
      - path: "testing.md"
        purpose: "TDD guidelines (80% coverage)"
        last_updated: "2026-01-04"
        details: "docs/llm/policies/testing.md"
      - path: "git-flow.md"
        purpose: "GitFlow branching strategy"
        last_updated: "2026-01-11"
      - path: "otel.md"
        purpose: "OpenTelemetry observability"
        last_updated: "2026-01-11"

    services:
      - path: "services/auth-bff.md"
        purpose: "BFF gateway for authentication (REST + Session)"
        last_updated: "2026-01-09"
        details: "docs/llm/services/auth-bff.md"
      - path: "services/identity-service.md"
        purpose: "Multi-app user platform"
        last_updated: "2026-01-04"
        details: "docs/llm/services/identity-service.md"
      - path: "services/auth-service.md"
        purpose: "Authentication + RBAC (Operators/Admins)"
        last_updated: "2026-01-04"
        details: "docs/llm/services/auth-service.md"
      - path: "services/legal-service.md"
        purpose: "Consents, DSR, compliance"
        last_updated: "2026-01-04"
        details: "docs/llm/services/legal-service.md"
      - path: "services/personal-service.md"
        purpose: "Resume, Profile API"
        last_updated: "2026-01-04"
        details: "docs/llm/services/personal-service.md"
      - path: "services/audit-service.md"
        purpose: "Compliance logging (ClickHouse)"
        last_updated: "2026-01-04"
        details: "docs/llm/services/audit-service.md"
      - path: "services/analytics-service.md"
        purpose: "Business analytics (ClickHouse)"
        last_updated: "2026-01-04"
        details: "docs/llm/services/analytics-service.md"

    apps:
      - path: "apps/web-main.md"
        purpose: "React 19 web app"
        last_updated: "2026-01-11"
        details: "docs/llm/apps/web-main.md"
      - path: "apps/web-admin.md"
        purpose: "Admin dashboard"
        last_updated: "2026-01-11"
        details: "docs/llm/apps/web-admin.md"
      - path: "apps/storybook.md"
        purpose: "Component library"
        last_updated: "2026-01-11"
        details: "docs/llm/apps/storybook.md"

    packages:
      - path: "packages/design-tokens.md"
        purpose: "WCAG 2.1 AAA design tokens (SSOT)"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/design-tokens.md"
      - path: "packages/nest-common.md"
        purpose: "NestJS utilities, guards, decorators"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/nest-common.md"
      - path: "packages/types.md"
        purpose: "TypeScript + Protobuf types"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/types.md"
      - path: "packages/ui-components.md"
        purpose: "React UI components"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/ui-components.md"
      - path: "packages/auth-utils.md"
        purpose: "Frontend auth utilities (Zustand + Axios)"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/auth-utils.md"
      - path: "packages/proto.md"
        purpose: "Protocol Buffers definitions"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/proto.md"
      - path: "packages/vitest-config.md"
        purpose: "Shared Vitest configuration"
        last_updated: "2026-01-11"
        details: "docs/llm/packages/vitest-config.md"

    features:
      - path: "resume.md"
        purpose: "Resume feature documentation"
        last_updated: "2026-01-11"
        details: "docs/llm/resume.md"
      - path: "i18n-locale.md"
        purpose: "Internationalization system"
        last_updated: "2026-01-11"
        details: "docs/llm/i18n-locale.md"
      - path: "user-preferences.md"
        purpose: "User preferences API"
        last_updated: "2026-01-11"
        details: "docs/llm/user-preferences.md"
      - path: "project-setup.md"
        purpose: "Quick start guide"
        last_updated: "2026-01-11"
        details: "docs/llm/project-setup.md"

    templates:
      - path: "templates/service.md"
        purpose: "Service document template"
        last_updated: "2026-01-04"

  tier3_concrete:
    description: "Human-readable detailed documentation"
    base_path: "docs/llm/"
    token_budget: "~30K tokens"
    subdirectories:
      - path: "policies/"
        purpose: "Detailed governance and policies"
        file_count: 13
      - path: "guides/"
        purpose: "Step-by-step tutorials"
        file_count: 10
      - path: "services/"
        purpose: "Service specifications"
        file_count: 7
      - path: "packages/"
        purpose: "Package documentation"
        file_count: 7
      - path: "apps/"
        purpose: "Application documentation"
        file_count: 3
      - path: "reports/"
        purpose: "Analysis and review reports"
        file_count: 5

# Bootstrap chain for LLM agents
bootstrap_chain:
  - "{LLM}.md"
  - ".ai/README.md"
  - ".ai/rules.md"
  - ".ai/best-practices.md"
  - ".ai/architecture.md"

# Task-to-file routing
task_routing:
  authentication: [".ai/rules.md", ".ai/services/auth-bff.md", ".ai/services/auth-service.md"]
  identity_platform: [".ai/services/identity-service.md", ".ai/architecture.md"]
  resume_profile: [".ai/services/personal-service.md", ".ai/resume.md"]
  audit_compliance: [".ai/services/audit-service.md"]
  analytics: [".ai/services/analytics-service.md"]
  frontend: [".ai/rules.md", ".ai/apps/web-main.md"]
  design_tokens: [".ai/ssot.md", ".ai/packages/design-tokens.md"]
  database_migration: [".ai/database.md", ".ai/rules.md"]
  caching: [".ai/caching.md"]
  deployment: [".ai/helm-deployment.md", ".ai/ci-cd.md"]
  testing: [".ai/testing.md"]
  create_pr: [".ai/pull-requests.md", ".ai/git-flow.md"]

# Cross-reference rules
linking:
  direction: "tier2 -> tier3"
  pattern: "**SSOT**: `docs/llm/path/FILE.md`"
  bidirectional_allowed: true
  explicit_required: true

# SSOT consolidations
ssot_consolidations:
  - source: ".ai/rules.md"
    replaces: "docs/llm/rules.md"
    reason: "Avoid duplication of core rules"

# Multi-LLM extensibility
extensibility:
  add_llm_steps:
    - "Create {LLM_NAME}.md at repository root"
    - "Copy structure from CLAUDE.md with Task-based Navigation"
    - "Update this manifest under tier1_indicate.files"
  supported_llms:
    - claude
    - gemini
  future_llms:
    - copilot
    - grok
    - llama

# Validation rules
validation:
  required_files:
    - "CLAUDE.md"
    - "GEMINI.md"
    - ".ai/README.md"
    - ".ai/rules.md"
    - ".ai/architecture.md"
  changelog_required: true
  changelog_path: ".ai/CHANGELOG.md"
  max_lines_per_ai_file: 50
  link_validation: true
