# Identity Service Configuration

# ============================================================
# Server
# ============================================================
PORT=3005
GRPC_PORT=50051
NODE_ENV=development

# ============================================================
# Database URLs (3 Separate DBs - Write/Primary)
# ============================================================
IDENTITY_DATABASE_URL=postgresql://girok_identity_dev:password@localhost:5432/girok_identity_dev
AUTH_DATABASE_URL=postgresql://girok_auth_dev:password@localhost:5432/girok_auth_dev
LEGAL_DATABASE_URL=postgresql://girok_legal_dev:password@localhost:5432/girok_legal_dev

# ============================================================
# CQRS - Read Replica URLs (Optional)
# Enable CQRS_ENABLED=true to use read replicas
# ============================================================
CQRS_ENABLED=false
# IDENTITY_READ_DATABASE_URL=postgresql://girok_identity_dev:password@localhost:5432/girok_identity_dev
# AUTH_READ_DATABASE_URL=postgresql://girok_auth_dev:password@localhost:5432/girok_auth_dev
# LEGAL_READ_DATABASE_URL=postgresql://girok_legal_dev:password@localhost:5432/girok_legal_dev
# CQRS_READ_POOL_SIZE=10
# CQRS_READ_IDLE_TIMEOUT=30000

# ============================================================
# Module Mode Configuration
# local: In-process module communication (default)
# remote: gRPC-based service communication (for service separation)
# ============================================================
IDENTITY_MODE=local
AUTH_MODE=local
LEGAL_MODE=local

# ============================================================
# Outbox Configuration
# ============================================================
OUTBOX_POLLING_INTERVAL_MS=5000
OUTBOX_BATCH_SIZE=100
OUTBOX_MAX_RETRIES=5

# ============================================================
# Redpanda Configuration (Future - Kafka-compatible)
# ============================================================
REDPANDA_ENABLED=false
# REDPANDA_BROKERS=localhost:9092

# ============================================================
# JWT Configuration (RS256)
# ============================================================
JWT_PRIVATE_KEY=your-private-key
JWT_PUBLIC_KEY=your-public-key
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d
JWT_ROTATION_GRACE_PERIOD=60

# ============================================================
# Valkey (Redis-compatible cache)
# ============================================================
VALKEY_HOST=localhost
VALKEY_PORT=6379
VALKEY_PASSWORD=
VALKEY_DB=0

# ============================================================
# CORS
# ============================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
FRONTEND_URL=http://localhost:3000

# ============================================================
# OpenTelemetry
# ============================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=identity-service
