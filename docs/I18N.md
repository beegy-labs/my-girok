# Internationalization (i18n) Guide

This document describes the internationalization setup and usage in the my-girok project.

## Supported Languages

The application currently supports three languages:

- **Korean (ko)** - Default language
- **English (en)** - Fallback language
- **Japanese (ja)**

## Technology Stack

- **Library**: [react-i18next](https://react.i18next.com/)
- **Core**: [i18next](https://www.i18next.com/)
- **Storage**: localStorage for language preference persistence

## Project Structure

```
apps/web-main/src/
‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îú‚îÄ‚îÄ config.ts              # i18n initialization and configuration
‚îÇ   ‚îî‚îÄ‚îÄ locales/
‚îÇ       ‚îú‚îÄ‚îÄ ko.json            # Korean translations
‚îÇ       ‚îú‚îÄ‚îÄ en.json            # English translations
‚îÇ       ‚îî‚îÄ‚îÄ ja.json            # Japanese translations
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ LanguageSwitcher.tsx   # Language switcher component
‚îî‚îÄ‚îÄ main.tsx                   # i18n import for initialization
```

## Configuration

### i18n Setup (`src/i18n/config.ts`)

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import en from './locales/en.json';
import ko from './locales/ko.json';
import ja from './locales/ja.json';

const resources = {
  en: { translation: en },
  ko: { translation: ko },
  ja: { translation: ja },
};

i18n.use(initReactI18next).init({
  resources,
  lng: localStorage.getItem('language') || 'ko', // Default language
  fallbackLng: 'en',
  interpolation: {
    escapeValue: false,
  },
});

export default i18n;
```

### Key Configuration Options

- **`lng`**: Default language (Korean), reads from localStorage if available
- **`fallbackLng`**: English as fallback when translation is missing
- **`interpolation.escapeValue`**: Set to false for React (handles escaping automatically)

## Translation Files

### File Structure

All translation files follow the same JSON structure:

```json
{
  "nav": {
    "login": "...",
    "register": "...",
    "logout": "..."
  },
  "home": {
    "title": "...",
    "subtitle": "...",
    ...
  },
  "auth": {
    ...
  },
  "resume": {
    ...
  }
}
```

### Current Translation Namespaces

1. **common**: Common UI elements (save, cancel, delete, edit, copy, share, preview, loading, backToHome, error, success, confirm, default, active, inactive)
2. **nav**: Navigation related text (login, register, logout, changePassword)
3. **home**: Home page content (titles, descriptions, app cards, recordType, quickLinks, settings, etc.)
4. **auth**: Authentication forms (email, password, buttons, messages, rememberEmail)
5. **resume**: Resume-related text including:
   - Basic resume actions (edit, preview, viewPublic)
   - Resume list management (myResumes, manageResumes, createNewResume, lastModified, sharing)
   - Share links (shareLink, shareLinkCreate, shareDuration, oneWeek, oneMonth, threeMonths, permanent)
   - Errors (loadFailed, shareFailed, deleteShareFailed, deleteFailed, copyFailed, copyLinkFailed, saveFailed, resumeNotFound)
   - Confirmations (deleteShare, deleteResume, copyResume)
   - Success messages (copied, saved, deleteDraft)
   - Form fields (resumeTitle, paperSize, description, name, email, phone, github, blog, linkedin, profilePhoto, militaryService, summary, etc.)
   - Experience form (company, startDate, endDate, position, jobTitle, experiencePeriod, projects, etc.)
   - Military service (militaryRanks, dischargeTypes)
6. **settings**: Settings page (title, description, backButton, darkMode, themeDescription, sectionOrder, visibility, saved, saveFailed, sections)
7. **changePassword**: Password change page (title, description, currentPassword, newPassword, confirmPassword, changeButton, changing, backToHome, errors, success)
8. **character**: Character messages for different states (loading, notFound, error, expired, deleted, noPermission, maintenance) with light/dark theme variants
9. **errors**: Global error messages (loginFailed, registrationFailed, loadingResume, startFilling)
10. **placeholders**: Common placeholders (email, password, namePlaceholder, usernamePlaceholder, emailPlaceholder)
11. **edit**: Resume edit page (editResume, createNewResume, updateInfo, fillInfo, showForm, showPreview, livePreview, previewDescription, error)

### Example Translations

#### Korean (`ko.json`)

```json
{
  "nav": {
    "login": "Î°úÍ∑∏Ïù∏",
    "register": "ÌöåÏõêÍ∞ÄÏûÖ",
    "logout": "Î°úÍ∑∏ÏïÑÏõÉ"
  }
}
```

#### English (`en.json`)

```json
{
  "nav": {
    "login": "Login",
    "register": "Register",
    "logout": "Logout"
  }
}
```

#### Japanese (`ja.json`)

```json
{
  "nav": {
    "login": "„É≠„Ç∞„Ç§„É≥",
    "register": "Êñ∞Ë¶èÁôªÈå≤",
    "logout": "„É≠„Ç∞„Ç¢„Ç¶„Éà"
  }
}
```

## Usage in Components

### Basic Usage

```typescript
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();

  return (
    <div>
      <button>{t('nav.login')}</button>
      <h1>{t('home.title')}</h1>
    </div>
  );
}
```

### Language Switching

```typescript
import { useTranslation } from 'react-i18next';

function LanguageSwitcher() {
  const { i18n } = useTranslation();

  const changeLanguage = (lng: string) => {
    i18n.changeLanguage(lng);
    localStorage.setItem('language', lng);
  };

  return (
    <button onClick={() => changeLanguage('ko')}>ÌïúÍµ≠Ïñ¥</button>
  );
}
```

### Checking Current Language

```typescript
const { i18n } = useTranslation();
const currentLanguage = i18n.language; // 'ko', 'en', or 'ja'
```

## Language Switcher Component

The `LanguageSwitcher` component is located in the Navbar and provides three buttons:

- **ÌïúÍµ≠Ïñ¥** (Korean)
- **English** (English)
- **Êó•Êú¨Ë™û** (Japanese)

The selected language button is highlighted in blue, and the user's selection is persisted in localStorage.

```typescript
<LanguageSwitcher />
```

## Adding New Translations

### Step 1: Add Translation Keys

Add the same key to all three language files:

**`ko.json`**

```json
{
  "newFeature": {
    "title": "ÏÉà Í∏∞Îä•"
  }
}
```

**`en.json`**

```json
{
  "newFeature": {
    "title": "New Feature"
  }
}
```

**`ja.json`**

```json
{
  "newFeature": {
    "title": "Êñ∞Ê©üËÉΩ"
  }
}
```

### Step 2: Use in Component

```typescript
const { t } = useTranslation();
<h1>{t('newFeature.title')}</h1>
```

## Best Practices

### 1. Always Provide All Languages

When adding new translation keys, **always add translations for all supported languages** (ko, en, ja).

```json
// ‚ùå Bad: Only Korean
{
  "button": {
    "submit": "Ï†úÏ∂ú"
  }
}

// ‚úÖ Good: All languages
// ko.json: "Ï†úÏ∂ú"
// en.json: "Submit"
// ja.json: "ÈÄÅ‰ø°"
```

### 2. Use Meaningful Key Names

Use clear, hierarchical key names that describe the content:

```json
// ‚ùå Bad
{
  "text1": "Login",
  "btn2": "Submit"
}

// ‚úÖ Good
{
  "nav": {
    "login": "Login"
  },
  "form": {
    "submit": "Submit"
  }
}
```

### 3. Group Related Translations

Group related translations under the same namespace:

```json
{
  "auth": {
    "login": "Login",
    "register": "Register",
    "forgotPassword": "Forgot Password?",
    "resetPassword": "Reset Password"
  }
}
```

### 4. Keep Translation Files Synchronized

Ensure all language files have the same structure and keys. Missing keys will fall back to English.

### 5. Use Interpolation for Dynamic Content

```typescript
// Translation file
{
  "welcome": "Welcome, {{name}}!"
}

// Component
t('welcome', { name: user.name })
```

## Testing

### Verify Translations

1. Switch between languages using the LanguageSwitcher
2. Check that all text updates correctly
3. Verify localStorage persistence by refreshing the page

### Check for Missing Translations

If a translation key is missing, i18next will:

1. First try the current language
2. Then fall back to English (fallbackLng)
3. Finally display the key itself if not found

## Language Detection Flow

1. **First Load**:
   - Check localStorage for saved language preference
   - If not found, use Korean (default)

2. **User Changes Language**:
   - Update i18n language
   - Save preference to localStorage

3. **Subsequent Loads**:
   - Read from localStorage
   - Apply saved language automatically

## Troubleshooting

### Translation Not Showing

1. **Check key exists in all language files**

   ```bash
   grep -r "yourKey" apps/web-main/src/i18n/locales/
   ```

2. **Verify i18n is imported in main.tsx**

   ```typescript
   import './i18n/config';
   ```

3. **Check browser console for i18next warnings**

### Language Not Persisting

1. **Verify localStorage is being set**

   ```typescript
   localStorage.setItem('language', lng);
   ```

2. **Check browser's localStorage**
   - Open DevTools ‚Üí Application ‚Üí Local Storage
   - Look for 'language' key

### Fallback Not Working

1. **Verify fallbackLng is set to 'en'**

   ```typescript
   fallbackLng: 'en';
   ```

2. **Ensure English translations exist**
   - Check `en.json` has the key

## Future Enhancements

Potential improvements for the i18n system:

1. **Language Detection**
   - Auto-detect browser language
   - Use `i18next-browser-languagedetector`

2. **More Languages**
   - Chinese (Simplified/Traditional)
   - Spanish
   - French

3. **Translation Management**
   - Use translation management platform (e.g., Lokalise, Crowdin)
   - Automated translation updates

4. **Lazy Loading**
   - Load translation files on demand
   - Reduce initial bundle size

5. **Pluralization**
   - Handle singular/plural forms
   - Use i18next pluralization features

6. **Date/Number Formatting**
   - Locale-specific formatting
   - Use `Intl` API or `date-fns` with locales

## Current Status (as of 2025-01-15)

### ‚úÖ Completed

1. **Translation Files Updated**
   - All three language files (ko.json, en.json, ja.json) have been comprehensively updated
   - Added 200+ new translation keys covering all major UI elements
   - Fixed missing keys in Japanese translation (militaryService, rememberEmail, address)
   - All language files now have synchronized structure

2. **New Translation Namespaces Added**
   - `common`: Common UI elements (buttons, labels, states)
   - `settings`: Settings page translations
   - `changePassword`: Password change functionality
   - `character`: Character messages for different states
   - `errors`: Global error messages
   - `placeholders`: Input placeholders
   - `edit`: Resume edit page
   - Extended `resume` namespace with form, experienceForm, militaryRanks, dischargeTypes

3. **Components with i18n Implemented** (10 components completed)
   - ‚úÖ HomePage.tsx - All home page text now using `home.*` and `common.*` keys
   - ‚úÖ NotFoundPage.tsx - Using `common.backToHome`
   - ‚úÖ ErrorBoundary.tsx - Using `common.backToHome` with direct `i18n.t()` (class component)
   - ‚úÖ SettingsPage.tsx - Using `settings.*` keys
   - ‚úÖ ThemeToggle.tsx - Using `settings.darkMode` and `settings.themeDescription`
   - ‚úÖ SectionOrderManager.tsx - Comprehensive i18n with enum mapping for section types
   - ‚úÖ StatusMessage.tsx - WCAG-compliant status messages using `status.*` namespace
   - ‚úÖ ChangePasswordPage.tsx - Full i18n with `changePassword.*` keys
   - ‚úÖ ResumeEditPage.tsx - Using `edit.*` and `errors.*` keys
   - ‚úÖ MyResumePage.tsx - Extensive i18n implementation with `resume.*`, `resume.list.*`, `resume.errors.*`, etc.

4. **Build Status**
   - ‚úÖ All changes successfully built without errors
   - ‚úÖ TypeScript compilation passes
   - ‚úÖ Vite production build succeeds

### üöß Remaining Work (Optional)

The following components have partial or no i18n implementation. These are MEDIUM and LOW priority items that can be addressed in future iterations:

#### **MEDIUM PRIORITY** (Components with partial i18n)

1. **ResumeForm.tsx** (`apps/web-main/src/components/resume/ResumeForm.tsx`)
   - Lines 291-294, 321-355, 373-558, 485-521, 567-605, 653-844, 894-1023, 1032-1179, 1199-1233
   - Has `useTranslation` but many strings are still hardcoded
   - Use `resume.form.*` translation keys (already available)
   - Systematically replace all remaining hardcoded English and Korean strings

2. **ExperienceSection.tsx** (`apps/web-main/src/components/resume/ExperienceSection.tsx`)
   - Lines 172-332, 245-252, 261-282, 290, 297, 332, 436-695, 862, 891
   - Receives `t` function but doesn't use it for most strings
   - Use `resume.experienceForm.*` translation keys (already available)
   - Replace all hardcoded English and Korean/English mixed strings

#### **LOW PRIORITY** (Minor fixes)

3. **LoginPage.tsx** (`apps/web-main/src/pages/LoginPage.tsx`)
   - Lines 56, 99, 114, 166
   - Add missing translation keys to `errors.*` and `placeholders.*`
   - Replace remaining hardcoded placeholders and error messages

4. **RegisterPage.tsx** (`apps/web-main/src/pages/RegisterPage.tsx`)
   - Lines 37, 82, 100, 119, 135
   - Add missing translation keys to `errors.*` and `placeholders.*`
   - Replace remaining hardcoded placeholders

### üìã Implementation Checklist

For each component that needs i18n implementation:

1. **Import useTranslation hook**

   ```typescript
   import { useTranslation } from 'react-i18next';
   ```

2. **Get the t function**

   ```typescript
   const { t } = useTranslation();
   ```

3. **Replace hardcoded strings**

   ```typescript
   // Before
   <h1>ÎÇòÏùò Ïù¥Î†•ÏÑú</h1>

   // After
   <h1>{t('resume.myResumes')}</h1>
   ```

4. **Use interpolation for dynamic content**

   ```typescript
   // Translation key: "welcome": "Welcome, {{name}}!"
   <p>{t('welcome', { name: user.name })}</p>
   ```

5. **Test all three languages**
   - Switch between Korean, English, and Japanese
   - Verify all text updates correctly
   - Check for missing or incorrect translations

### üéØ Next Steps

1. Start with **HIGH PRIORITY** pages
2. Follow the implementation checklist for each component
3. Test thoroughly after each component update
4. Move to **MEDIUM PRIORITY** components
5. Complete **LOW PRIORITY** fixes
6. Run final tests across all three languages

## Best Practices (Updated)

### 1. Always Provide All Languages

When adding new translation keys, **always add translations for all supported languages** (ko, en, ja).

```json
// ‚ùå Bad: Only Korean
{
  "button": {
    "submit": "Ï†úÏ∂ú"
  }
}

// ‚úÖ Good: All languages
// ko.json: "Ï†úÏ∂ú"
// en.json: "Submit"
// ja.json: "ÈÄÅ‰ø°"
```

### 2. Use Meaningful Key Names

Use clear, hierarchical key names that describe the content:

```json
// ‚ùå Bad
{
  "text1": "Login",
  "btn2": "Submit"
}

// ‚úÖ Good
{
  "nav": {
    "login": "Login"
  },
  "form": {
    "submit": "Submit"
  }
}
```

### 3. Group Related Translations

Group related translations under the same namespace:

```json
{
  "auth": {
    "login": "Login",
    "register": "Register",
    "forgotPassword": "Forgot Password?",
    "resetPassword": "Reset Password"
  }
}
```

### 4. Keep Translation Files Synchronized

Ensure all language files have the same structure and keys. Missing keys will fall back to English.

**Important**: Always update all three language files (ko.json, en.json, ja.json) simultaneously when adding new keys.

### 5. Use Interpolation for Dynamic Content

```typescript
// Translation file
{
  "welcome": "Welcome, {{name}}!",
  "duration": "{{years}} years {{months}} months"
}

// Component
t('welcome', { name: user.name })
t('duration', { years: 2, months: 3 })
```

### 6. Never Hardcode User-Facing Text

**All user-visible text must use i18n**, including:

- Button labels
- Page titles and headings
- Form field labels and placeholders
- Error messages
- Success messages
- Tooltips and hints
- Status messages
- Empty state messages
- Character messages

```typescript
// ‚ùå Bad: Hardcoded text
<button>Ï†ÄÏû•</button>
<h1>My Resumes</h1>
<p>Loading...</p>

// ‚úÖ Good: Using i18n
<button>{t('common.save')}</button>
<h1>{t('resume.myResumes')}</h1>
<p>{t('common.loading')}</p>
```

### 7. Use Common Namespace for Reusable UI Elements

Put frequently reused text in the `common` namespace:

- save, cancel, delete, edit, copy, share, preview
- loading, error, success
- backToHome, confirm
- default, active, inactive

```typescript
// ‚úÖ Good: Reusing common translations
<button>{t('common.save')}</button>
<button>{t('common.cancel')}</button>
<button>{t('common.delete')}</button>
```

### 8. Test All Languages Before Committing

Before submitting code:

1. Test the component/page in Korean
2. Test the component/page in English
3. Test the component/page in Japanese
4. Verify all text displays correctly
5. Check for layout issues with different text lengths

## Resources

- [react-i18next Documentation](https://react.i18next.com/)
- [i18next Documentation](https://www.i18next.com/)
- [i18next Best Practices](https://www.i18next.com/principles/best-practices)
- [Translation Keys Reference](./i18n/locales/) - See ko.json, en.json, ja.json for all available keys

---

**Last Updated**: 2025-11-15
**Maintainer**: Engineering Team
**Status**: Translation files completed, component implementation in progress
